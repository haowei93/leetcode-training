# 股票问题

股票的三种选择， 买入、卖出、无操作

i, k, s
其中i是对应天数， k是最大交易数， s是当前持有状态(0, 1)

```java

for(int i=0; i<n; i++) {
    for(int k=1; k<=K; k++) {
        for(int s=0; s<=1; s++) {
            dp[i][k][s] = max(buy, sell. rest);
        }        
    }
}    

其中 dp[3][2][1] 表示第三天 手上持有股票，至今最多进行2次交易
dp[2][3][0] 表示第二天， 手上没有持有股票， 至今最多进行三次交易

最终结果dp[n - 1][K][0] 最后一天， 最多k次交易，所能活动的最大利润
```

# 状态机流转

![状态机.png](状态机.img)

dp[i][k][0] = max(dp[i-1][k][0], dp[i-1][k][1] + prices[i])
// 今天没有持有股票， 两种可能， 前一天也没持有， 或者今天卖掉了
dp[i][k][1] = max(dp[i-1][k][1], dp[i-1][k-1][0] - prices[i])
// 今天持有股票， 两种可能， 前一天就持有，或者今天刚买入

# 对应的base case

dp[-1][k][0] = 0  // i从0开始，此时还未开始，利润为0 
dp[-1][k][1] = -inf  // 不可能的情况
dp[i][0][0] = 0   // k=0， 没有交易， 利润为0
dp[i][0][1] = -inf  // 不可能的情况